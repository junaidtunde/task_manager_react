(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports={dash_layout:"Dashboard_dash_layout__3_oRq",center_items:"Dashboard_center_items__1Lc13",light_text_header:"Dashboard_light_text_header__3ObU5",moreOptions:"Dashboard_moreOptions__IAuKk",moreOptionsRight:"Dashboard_moreOptionsRight__3NnsF",loading:"Dashboard_loading__23UhF",loading_bar:"Dashboard_loading_bar__3h3Pe"}},25:function(e,t,a){e.exports={right_bg:"Register_right_bg__2xwDQ",contain:"Register_contain__hOM5v",card:"Register_card__2fGN0"}},26:function(e,t,a){e.exports={right_bg:"Login_right_bg__3PTtf",contain:"Login_contain__1LhHx",card:"Login_card__1197-"}},43:function(e,t,a){e.exports={contain:"AdminLogin_contain__3ZaJE"}},44:function(e,t,a){e.exports={dash_layout:"TaskList_dash_layout__3vAwi",center_items:"TaskList_center_items__15KXR",light_text_header:"TaskList_light_text_header__l1INS",moreOptions:"TaskList_moreOptions__BU4ey",moreOptionsRight:"TaskList_moreOptionsRight__rlmKL",loading:"TaskList_loading__1Dh5D",loading_bar:"TaskList_loading_bar__tDoeq"}},47:function(e,t,a){e.exports=a(77)},52:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(23),l=a.n(r),c=(a(52),a(2)),o=a(3),i=a(6),m=a(4),u=a(7),d=a(18),h=a(20),p=a(5),g=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.user?s.a.createElement("div",null,s.a.createElement("h1",null,"At Home")):s.a.createElement(h.a,{to:"/login"})}}]),t}(n.Component),E=Object(p.b)(function(e){return{user:e.auth.user}})(g);function f(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Not Found"))}var b=a(16),_=a(25),v=a.n(_),N={},y=window.$;N.showSuccessToast=function(e){y.toast({heading:"Successful",text:e,showHideTransition:"slide",icon:"success",loaderBg:"#f96868",position:"top-right"})},N.showDangerToast=function(e){y.toast({heading:"Error",text:e,showHideTransition:"fade",icon:"error",loaderBg:"#f2a654",position:"top-right"})};var S=N,w=a(17),O=a.n(w),k="http://localhost:3000/api/v1",T=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",email:"",password:""},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.registerUser(a.state)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.user?s.a.createElement(h.a,{to:"/"}):s.a.createElement("div",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-md-6"},s.a.createElement("div",{className:"".concat(v.a.contain)},s.a.createElement("div",{className:"".concat(v.a.card)},s.a.createElement("div",{className:"card-body pb-10"},s.a.createElement("h3",{className:"text-center"},"Sign up"),s.a.createElement("form",{className:"mt-4",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"username",className:"form-label"},"Username"),s.a.createElement("input",{type:"text",className:"form-control",id:"username",value:this.state.username,onChange:this.handleChange,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),s.a.createElement("input",{type:"email",className:"form-control",id:"email",value:this.state.email,onChange:this.handleChange,required:!0})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),s.a.createElement("input",{type:"password",className:"form-control",id:"password",value:this.state.password,onChange:this.handleChange,required:!0})),s.a.createElement("small",{className:"mt-4"},"Already have an account?",s.a.createElement(d.b,{to:"/login"},"login")),s.a.createElement("div",{className:"text-center mt-3"},s.a.createElement("button",{className:"btn btn-success"},"Register",this.props.loading?s.a.createElement("div",{className:"ml-4 spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")):null))))))),s.a.createElement("div",{className:"col-0 col-md-6 ".concat(v.a.right_bg)})))}}]),t}(n.Component),j=Object(p.b)(function(e){return{loading:e.auth.loading,user:e.auth.user}},function(e,t){return{registerUser:function(a){return e(function(e){return function(t,a){return new Promise(function(a,n){t({type:"REQUESTING"}),O.a.post(k+"/user/register",e).then(function(e){localStorage.setItem("payld_token",e.data.token),S.showSuccessToast("User registration was successful"),t({type:"SUCCESSFUL"}),a()}).catch(function(e){S.showDangerToast(e.response.data.message),t({type:"ERROR"}),n(e.response.data.message)})})}}(a)).then(function(){console.log("here"),t.history.push("/")}).catch(function(e){console.log(e)})}}})(T),C=a(26),R=a.n(C),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.login(a.state)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.user?s.a.createElement(h.a,{to:"/"}):s.a.createElement("div",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-md-6"},s.a.createElement("div",{className:"".concat(R.a.contain)},s.a.createElement("div",{className:"".concat(R.a.card)},s.a.createElement("div",{className:"card-body pb-10"},s.a.createElement("h3",{className:"text-center"},"Sign In"),s.a.createElement("hr",null),s.a.createElement("form",{className:"mt-4",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email address"),s.a.createElement("input",{type:"email",id:"email",value:this.state.email,onChange:this.handleChange,className:"form-control"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),s.a.createElement("input",{type:"password",id:"password",value:this.state.password,onChange:this.handleChange,className:"form-control"})),s.a.createElement("small",{className:"mt-4"},"Don't have an account?",s.a.createElement(d.b,{to:"/register"},"register")),s.a.createElement("div",{className:"text-center mt-3"},s.a.createElement("button",{className:"btn btn-success"},"Login",this.props.loading?s.a.createElement("div",{className:"ml-3 spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")):null))))))),s.a.createElement("div",{className:"col-0 col-md-6 ".concat(R.a.right_bg)})))}}]),t}(n.Component),A=Object(p.b)(function(e){return{loading:e.auth.loading,user:e.auth.user}},function(e,t){return{login:function(a){return e(function(e){return function(t,a){return new Promise(function(a,n){t({type:"REQUESTING"}),O.a.post(k+"/user/login",e).then(function(e){localStorage.setItem("payld_token",e.data.token),S.showSuccessToast("User login was successful"),t({type:"SUCCESSFUL"}),a()}).catch(function(e){S.showDangerToast(e.response.data.message),t({type:"ERROR"}),n(e.response.data.message)})})}}(a)).then(function(){t.history.push("/")}).catch(function(e){console.log(e)})}}})(x),U=function(e){return function(t,a){return new Promise(function(a,n){t({type:"REQUESTING"}),O.a.post(k+"/admin/login",e).then(function(e){localStorage.setItem("payld_token_s",e.data.token),S.showSuccessToast("Admin login was successful"),t({type:"ADMIN_SUCCESSFUL"}),a()}).catch(function(e){console.log(e.response),S.showDangerToast(e.response.data.message),t({type:"ERROR"}),n(e.response.data.message)})})}},D=a(43),L=a.n(D),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.login(a.state)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.admin?s.a.createElement(h.a,{to:"/admin/dashboard"}):s.a.createElement("div",null,s.a.createElement("div",{style:{backgroundColor:"#F5F5F5"}},s.a.createElement("div",{className:"".concat(L.a.contain)},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body pb-10"},s.a.createElement("div",{className:"text-center"},"Administrator Login"),s.a.createElement("hr",null),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"mt-4"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email address"),s.a.createElement("input",{type:"email",className:"form-control",id:"email",value:this.state.email,onChange:this.handleChange})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),s.a.createElement("input",{type:"password",className:"form-control",id:"password",value:this.state.password,onChange:this.handleChange})),s.a.createElement("div",{className:"text-center mt-3"},s.a.createElement("button",{className:"btn btn-success"},"Login",this.props.loading?s.a.createElement("div",{className:"ml-3 spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")):null))))))))}}]),t}(n.Component),F=Object(p.b)(function(e){return{loading:e.auth.loading,admin:e.auth.admin}},function(e,t){return{login:function(a){return e(U(a)).then(function(){t.history.push("/admin/dashboard")}).catch(function(e){console.log(e)})}}})(I),G=a(15),K=a.n(G),P={headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("payld_token_s")}},Q=a(44),H=a.n(Q),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).deleteComment=function(e){console.log(e)},a.renderSwitch=function(e){switch(e){case"new":return s.a.createElement("span",{className:"badge badge-primary"},"new");case"in-progress":return s.a.createElement("span",{className:"badge badge-secondary"},"in-progress");case"completed":return s.a.createElement("span",{className:"badge badge-success"},"completed");case"archived":return s.a.createElement("span",{className:"badge badge-info"},"archived");default:return null}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tasks;return s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card",style:{height:"90vh",overflow:"scroll"}},s.a.createElement("h3",{className:"mt-3"},"List of all tasks"),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Description"),s.a.createElement("th",null,"Assigned"),s.a.createElement("th",null,"Comments"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Action"))),s.a.createElement("tbody",null,0!==t.length?t.map(function(t){return s.a.createElement("tr",{key:t._id},s.a.createElement("td",null,t.description),s.a.createElement("td",null,t.user.username),s.a.createElement("td",null,0!==t.comments.length?t.comments.map(function(t){return s.a.createElement("ul",{className:"pl-0",style:{listStyleType:"none"}},t.message?s.a.createElement("li",null,s.a.createElement("small",null,t.message,s.a.createElement("i",{className:"fas fa-trash",style:{color:"red",cursor:"pointer"},onClick:function(){return e.delecomment(t._id)}}))):s.a.createElement("li",null,s.a.createElement("small",null,"There are no comments at the moment")))}):s.a.createElement("small",null,"There are no comments at the moment")),s.a.createElement("td",null,e.renderSwitch(t.status)),s.a.createElement("td",null,s.a.createElement("div",null,s.a.createElement("span",{className:"".concat(H.a.moreOptionsRight," bg-danger"),onClick:function(){return e.props.archiveTask(t._id)}},s.a.createElement("i",{className:"fas fa-file-archive",style:{color:"white"}}),s.a.createElement("span",{className:"ml-2 text-white"},"Archive")))))}):null)),0===t.length?s.a.createElement("h3",{className:"text-center",style:{fontWeight:"lighter"}},"There are no tasks at the moment"):null)))))}}]),t}(n.Component),q=Object(p.b)(null,function(e){return{archiveTask:function(t){return e(function(e){return function(t,a){var n={task_id:e};O.a.put(k+"/task/archive",n,P).then(function(a){console.log(a.data),S.showSuccessToast("Successfully archived the task"),t({type:"ARCHIVED_TASK",data:e})}).catch(function(e){console.log(e.response),S.showDangerToast(e.response.data.message)})}}(t))}}})(M),B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={description:"",user_id:""},a.componentWillMount=function(){a.props.admin&&0===a.props.tasks.length&&a.props.fetchTasks(),a.props.admin&&0===a.props.users.length&&a.props.fetchUsers().then(function(){0!==a.props.users.length&&a.setState({user_id:a.props.users[0]._id})})},a.logout=function(){localStorage.clear(),window.location.href="/admin/login"},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.id,e.target.value))},a.handleSelect=function(e){a.props.users.forEach(function(t){t.username===e.target.value&&a.setState({user_id:t._id})})},a.createNewTask=function(e){e.preventDefault(),a.props.create_new_task(a.state)},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.admin?s.a.createElement("div",null,this.props.loading?s.a.createElement("div",{className:"".concat(K.a.loading)},s.a.createElement("div",{className:"".concat(K.a.loading_bar),style:{marginRight:"10px"}}),s.a.createElement("div",{className:"".concat(K.a.loading_bar),style:{marginRight:"10px"}}),s.a.createElement("div",{className:"".concat(K.a.loading_bar),style:{marginRight:"10px"}}),s.a.createElement("div",{className:"".concat(K.a.loading_bar)})):s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("nav",{className:K.a.light_text_header},s.a.createElement("span",null,"Welcome Administrator"),s.a.createElement("span",{style:{float:"right",cursor:"pointer"},onClick:this.logout},s.a.createElement("img",{src:"/img/images/logout.png",alt:"",className:"img-fluid"}),s.a.createElement("span",{style:{fontSize:"smaller",marginLeft:"7px"}},"Logout")))),s.a.createElement("div",{className:"".concat(K.a.dash_layout)},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"".concat(K.a.center_items," col-12 col-md-4")},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",null,"Create Task"),s.a.createElement("hr",null),s.a.createElement("form",{className:"text-left",onSubmit:this.createNewTask},s.a.createElement("div",{className:"mb-3"},s.a.createElement("label",{htmlFor:"descrition"},"Description"),s.a.createElement("textarea",{name:"description",id:"description",cols:"10",rows:"5",onChange:this.handleChange,className:"form-control",value:this.state.description})),0!==this.props.users.length?s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"select_user"},"Select a user"),s.a.createElement("select",{className:"".concat(K.a.custom_select," form-control"),id:"username",onChange:this.handleSelect},this.props.users?this.props.users.map(function(e){return s.a.createElement("option",{value:e.username,key:e._id},e.username)}):null)):s.a.createElement("div",{className:"form-group"},s.a.createElement("p",null,"There are no users in the system yet....")),0!==this.props.length?s.a.createElement("div",{className:"text-right"},s.a.createElement("button",{className:"btn btn-success",type:"submit"},"Create",this.props.submit?s.a.createElement("div",{className:"spinner-border spinner-border-sm ml-4"},s.a.createElement("span",{className:"sr-only"},"Loading...")):null)):null))))),s.a.createElement("div",{className:"".concat(K.a.center_items," col-12 col-md-8")},s.a.createElement(q,{tasks:this.props.tasks})))))):s.a.createElement(h.a,{to:"/admin/login"})}}]),t}(n.Component),W=Object(p.b)(function(e){return{admin:e.auth.admin,tasks:e.task.tasks,users:e.task.users,loading:e.task.loading,submit:e.task.submit}},function(e){return{fetchTasks:function(){return e(function(e,t){e({type:"REQUESTING_SOMETHING"}),O.a.get(k+"/task/all").then(function(t){e({type:"GOTTEN_TASKS",data:t.data.data})}).catch(function(e){console.log(e.response.data.message)})})},fetchUsers:function(){return new Promise(function(t,a){e(function(e,t){return new Promise(function(t,a){e({type:"REQUESTING_SOMETHING"}),O.a.get(k+"/user/all").then(function(a){e({type:"GOTTEN_USERS",data:a.data.data}),t()}).catch(function(e){console.log(e.response.data.message),a()})})}).then(function(){t()}).catch(function(){a()})})},create_new_task:function(t){return e(function(e){return function(t,a){t({type:"REQUESTING_TASK"}),O.a.post(k+"/task/create",e,P).then(function(e){var a={description:e.data.data.description,user:{username:e.data.user_name},comments:[],status:e.data.data.status,_id:e.data.data._id};t({type:"CREATED_TASK",data:a}),S.showSuccessToast(e.data.message)}).catch(function(e){console.log(e.response.data),S.showDangerToast(e.response.data.message)})}}(t))}}})(B),J=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement(h.d,null,s.a.createElement(h.b,{exact:!0,path:"/",component:E}),s.a.createElement(h.b,{exact:!0,path:"/register",component:j}),s.a.createElement(h.b,{exact:!0,path:"/login",component:A}),s.a.createElement(h.b,{exact:!0,path:"/admin/login",component:F}),s.a.createElement(h.b,{exact:!0,path:"/admin/dashboard",component:W}),s.a.createElement(h.b,{exact:!0,path:"**",component:f})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(21),V=a(45),$=a(46),X=a(13),Z={tasks:[],users:[],loading:!1,submit:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOTTEN_TASKS":return Object(X.a)({},e,{tasks:t.data,loading:!1});case"GOTTEN_USERS":return Object(X.a)({},e,{users:t.data,loading:!1});case"REQUESTING_SOMETHING":return Object(X.a)({},e,{loading:!0});case"REQUESTING_TASK":return Object(X.a)({},e,{submit:!0});case"CREATED_TASK":return Object(X.a)({},e,{tasks:[].concat(Object($.a)(e.tasks),[t.data]),submit:!1});case"ARCHIVED_TASK":var a=e.tasks.map(function(e){return e._id===t.data&&(e.status="archived"),e});return Object(X.a)({},e,{tasks:a});default:return e}},ee={user:localStorage.getItem("payld_token"),admin:localStorage.getItem("payld_token_s"),loading:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee;switch((arguments.length>1?arguments[1]:void 0).type){case"REQUESTING":return Object(X.a)({},e,{loading:!0});case"SUCCESSFUL":return Object(X.a)({},e,{user:localStorage.getItem("payld_token"),loading:!1});case"ERROR":return Object(X.a)({},e,{loading:!1});case"ADMIN_SUCCESSFUL":return Object(X.a)({},e,{admin:localStorage.getItem("payld_token_s"),loading:!1});default:return e}},ae=Object(z.c)({auth:te,task:Y}),ne=(a(75),a(76),Object(z.d)(ae,Object(z.a)(V.a)));l.a.render(s.a.createElement(p.a,{store:ne},s.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.17621939.chunk.js.map